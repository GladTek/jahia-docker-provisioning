# Start with the provisioning script from Tutorial #3
- include: https://raw.githubusercontent.com/Jahia/provisioning-tutorials/main/03-augmented-search/provisioning.yaml

# Install Forms
- installAndStartBundle: 'mvn:org.jahia.modules/forms-snippets-extension/3.0.0'
- startBundle: 'forms-snippets-extension/3.0.0'
- installAndStartBundle: 'mvn:org.jahia.modules/forms-nocss-theme/2.0.0'
- startBundle: 'forms-nocss-theme/2.0.0'
- installAndStartBundle: 'mvn:org.jahia.modules/forms-prefill/2.0.0'
- startBundle: 'forms-prefill/2.0.0'
- installAndStartBundle: 'mvn:org.jahia.modules/forms-core/3.2.0'
- startBundle: 'forms-core/3.2.0'
- installAndStartBundle: 'mvn:org.jahia.modules/forms-extended-inputs/2.0.0'
- startBundle: 'forms-extended-inputs/2.0.0'

# Install jExperience
- installAndStartBundle: 'mvn:org.jahia.modules/jexperience/2.0.0'
- startBundle: 'jexperience/2.0.0'

- karafCommand: "config:edit org.jahia.modules.jexperience.settings-global.cfg"
- karafCommand: "config:property-set jexperience.jCustomerURL https://jcustomer:9443"
- karafCommand: "config:property-set jexperience.jCustomerPassword karaf"
- karafCommand: "config:property-set jexperience.jCustomerUsername karaf"
- karafCommand: "config:property-set jexperience.jCustomerTrustAllCertificates true"
- karafCommand: "config:property-set jexperience.jCustomerUsePublicAddressesForAdmin false"
- karafCommand: "config:property-set jexperience.jCustomerKey 670c26d1cc413346c3b2fd9ce65dab41"
- karafCommand: "config:update"
